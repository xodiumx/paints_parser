# test_parser
```
Task
#------------------------------------------------------------#
С помощью библиотеки `Scrapy` нужно написать парсер, который:
- Заходит на каталог сайта https://order-nn.ru/kmo/catalog/.
- Забирает из списка категорий только три: “Краски и материалы специального назначения”, “Краски для наружных работ”, “Лаки”.
- Собирает все товары перечисленных категорий.

Требования:
- Не прибегать к использованию инструментов для выполнения JS на странице (добавлено: 10.09.2023).
- У каждого товара нужно собрать следующую информацию:
  1. наименование
  2. ценa
  3. описание
  4. характеристики* в виде JSON.
  5. Должна учитываться пагинация.
- Извлекать информацию нужно только с помощью XPath. XPath должны быть написаны так, чтобы их актуальность была в наименьшей степени подвержены изменениям структуры сайта.
- Собранную информацию о товарах нужно сохранить в .csv файл.
- Для работы с данными (обработка/выгрузка данных в файл) нужно использовать библиотеку `Pandas`.
- Нужно использовать минимально возможное количество запросов к сайту.
#------------------------------------------------------------#
```

## Установка через docker
1. Клонируйте репозиторий
```
git clone git@github.com:xodiumx/test_parser.git
```
3. Перейдите в директорию
```
cd src
```
2. В директории `scr` создайте `.env` file
```
DB_NAME=ordernn
DB_HOST=db_parser
# DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASS=admin

POSTGRES_USER=postgres
POSTGRES_PASSWORD=admin

PGADMIN_EMAIL=admin@admin.com
PGADMIN_PASSWORD=admin
```
3. Выполните команду
```
docker-compose up -d
```

## Пример использования 

1. Данные записываются в db - `postgresql`
2. Данные записываются в `csv` файл `ordernn_2023-09-28T15-42-38.csv`
3. Данные записываются в `json` файл `ordernn_2023-09-28T15-42-38.json`

```json
[
{
    "name": "Лак для внутренних поверхностей NATURA 40 полуглянцевый бесцветный TEKNOS",
    "price": 120.0,
    "description": "NATURA 40 - водоразбавляемый полуглянцевый акриловый лак без запаха с усиленной защитой против ультрафиолета. Он хорошо выравнивается, быстро высыхает, почти не имеет запаха и не желтеет, стойкий к мытью и износу. Изделие относится к категории М1 строительных материалов по выбросам вредных веществ. Применяется для лакировки, например, внутренних деревянных стен и потолков, панелей и стен из бревна. Не подходит для лакировки полов и мебели.",
    "url": "https://order-nn.ru/kmo/catalog/9443/522805",
    "characteristics": {
        "Бренд": "TEKNOS",
        "Страна производителя": "ФИНЛЯНДИЯ",
        "Цвет": "бесцветный",
        "Колеровка": "да",
        "Область применения": "бревенчатые стены / потолки",
        "Состав,": "акриловый",
        "Разбавитель (растворитель)": "вода",
        "Степень блеска поверхности": "полуглянцевая",
        "Готовность к применению": "готов к применению",
        "Способ нанесения": "кисть / безвоздушное",
        "Время полного высыхания (ч)": "8",
        "Вид покрытия": "оставляет природный рисунок древесины",
        "Тип работ": "внутренние работы",
        "Температура применения, (град. C)": "от +10",
        "Рекомендованное количество слоев покрытия": "2-3",
        "Расход (1 слой), (кв.м/л)": "8-14",
        "Время высыхания между слоями (ч)": "1",
        "Тип поверхности": "дерево / ДВП / ДСП",
        "Защита от УФ-излучения (солнца)": "усиленная",
        "Фасовка (л)": "9"
    }
},
]
```
#### *примеры находятся в директории `examples`*

#### `localhost:5050` - pgAdmin endpoint
